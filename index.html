<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Sentence completion</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>

        <link rel="stylesheet" href="./css/styles.css">
        <style></style>
    </head>

<body>
    <div id="container1">
        <images></images>
    </div>    
</body>

<script type="module">
    import {createApp} from '/js/vue.esm-browser.js'
    const app = createApp({})

    const images = {
        data() {
            return {
                isButtonDropped: false,
                isImageDropped: false,
                imagesUrls:[
                    {
                        url: 'https://images.pexels.com/photos/7195269/pexels-photo-7195269.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2',
                        index: 0
                    },
                    {
                        url: 'https://images.pexels.com/photos/102104/pexels-photo-102104.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2',
                        index: 1
                    },
                    {
                        url: 'https://images.pexels.com/photos/2872767/pexels-photo-2872767.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2',
                        index: 2
                    },
                    {
                        url: 'https://images.pexels.com/photos/4033025/pexels-photo-4033025.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2',
                        index: 3
                    }
                ],
                words:[ 'naranja', 'manzana', 'banano', 'mandarina','kiwi','fresas','uvas' ],
                droppedImages: [],
            }
        },
        template: `
            <div class="container text-center">
                <div class="row content-words">
                    <div class="col-6 content-word">
                        <div v-for="(word, index) in words" :key="index" class="word"
                            draggable="true"
                            @dragstart="dragStart($event, word, index)"
                            @dragend="dragEnd($event)"
                        >
                            {{word}} 
                        </div>
                    </div>
                </div>
            </div>

            <div class="container text-center">
                <div class="row content-images">
                    <div v-for="(image, index) in imagesUrls" :key="index" class="col-3 ">
                        <div class="content-image drop-zone-words">
                            <img 
                                @dragover=allowDropWord($event)
                                class="img-fluid same-size" 
                                :src="image.url"
                            />
                            <p>{{index}}</p>
                        </div>
                    </div>
                </div>
            </div>
        `,
        methods: {
            dragStart(event, index){
                console.log('EVENT DRAG start');
                event.dataTransfer.setData('text/plain', index.toString());
            },
            dragEnd(event){
                console.log('EVENT DRAG end');
            },
            allowDropWord(event){
                console.log('EVENT allow drop word');
                event.preventDefault();
            },
            dropWord(event, indexDrop){
                event.preventDefault();
                const indexImage = event.dataTransfer.getData('text/plain');
                const indexImageNum = parseInt(indexImage)

                if(indexImageNum === indexDrop){
                    this.droppedImages[indexDrop] = this.imagesUrls[indexDrop]
                }
            }
        },
        computed: {
        }
    }
    app.component('images', images)
    app.mount('#container1')

    app.config.errorHandler = (err) => {
        /* handle error */
        console.log('pump error', err);
    }
</script>


</html>